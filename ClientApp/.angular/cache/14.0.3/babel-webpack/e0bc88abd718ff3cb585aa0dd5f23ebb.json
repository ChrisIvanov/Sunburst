{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/inventory.service\";\nimport * as i3 from \"../../../api-authorization/authorize.service\";\n\nfunction ItemPageComponent_button_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 5);\n    i0.ɵɵlistener(\"click\", function ItemPageComponent_button_8_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.buyItem(ctx_r1.item));\n    });\n    i0.ɵɵtext(1, \"Buy Item\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport class ItemPageComponent {\n  constructor(route, inventoryService, // private authService: AuthService, \n  router, authorizeService) {\n    this.route = route;\n    this.inventoryService = inventoryService;\n    this.router = router;\n    this.authorizeService = authorizeService;\n  } // isUserLoggedIn(): boolean {\n  //   const user = this.authService.isAuthenticated();\n  //   // console.log('User: ', user);\n  //   return user !== null;\n  // }\n\n\n  buyItem(item) {\n    if (this.isAuthenticated) {\n      console.log('logged');\n      console.log(this.accessToken);\n    } else {\n      console.log('not logged');\n      this.router.navigate(['Identity/Account/Login'], {\n        queryParams: {\n          message: 'Please log in to buy items.'\n        }\n      });\n    }\n  }\n\n  ngOnInit() {\n    const itemName = this.route.snapshot.params['name'];\n    const observer = {\n      next: data => {\n        this.item = data;\n      },\n      error: error => {\n        console.error(error);\n      },\n      complete: () => {\n        console.log(this.accessToken);\n        console.log('Item Observer completed');\n      }\n    };\n    this.isAuthenticated = this.authorizeService.isAuthenticated();\n    this.accessToken = this.authorizeService.getAccessToken();\n    this.item = this.inventoryService.getItemByName(itemName).subscribe(observer);\n    ;\n  }\n\n}\n\nItemPageComponent.ɵfac = function ItemPageComponent_Factory(t) {\n  return new (t || ItemPageComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.InventoryService), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i3.AuthorizeService));\n};\n\nItemPageComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ItemPageComponent,\n  selectors: [[\"app-item-page\"]],\n  decls: 10,\n  vars: 7,\n  consts: [[1, \"item-detail\"], [1, \"image-container\"], [3, \"src\", \"alt\"], [1, \"details-container\"], [3, \"click\", 4, \"ngIf\"], [3, \"click\"]],\n  template: function ItemPageComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n      i0.ɵɵelement(2, \"img\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 3)(4, \"h2\");\n      i0.ɵɵtext(5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"p\");\n      i0.ɵɵtext(7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(8, ItemPageComponent_button_8_Template, 2, 0, \"button\", 4);\n      i0.ɵɵpipe(9, \"async\");\n      i0.ɵɵelementEnd()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵpropertyInterpolate1(\"alt\", \"\", ctx.item.name, \" image\");\n      i0.ɵɵproperty(\"src\", ctx.item.imagePath, i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate(ctx.item.name);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.item.description);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(9, 5, ctx.isAuthenticated));\n    }\n  },\n  styles: [\".item-detail[_ngcontent-%COMP%] {\\r\\n   display: flex; \\r\\n   align-items: center; \\r\\n   padding: 20px; \\r\\n \\r\\n   \\r\\n   width: 100%;\\r\\n   max-width: 800px;\\r\\n   margin: 0 auto;\\r\\n }\\r\\n \\r\\n .image-container[_ngcontent-%COMP%] {\\r\\n   flex: 0 0 auto; \\r\\n   margin-right: 20px; \\r\\n }\\r\\n \\r\\n img[_ngcontent-%COMP%] {\\r\\n   max-width: 100%; \\r\\n   width: 300px;\\r\\n   height: 380px;\\r\\n }\\r\\n \\r\\n .details-container[_ngcontent-%COMP%] {\\r\\n   flex: 1; \\r\\n }\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIml0ZW0tcGFnZS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0dBQ0csYUFBYSxFQUFFLDhDQUE4QztHQUM3RCxtQkFBbUIsRUFBRSx5Q0FBeUM7R0FDOUQsYUFBYSxFQUFFLDRCQUE0Qjs7R0FFM0MsZ0RBQWdEO0dBQ2hELFdBQVc7R0FDWCxnQkFBZ0I7R0FDaEIsY0FBYztDQUNoQjs7Q0FFQTtHQUNFLGNBQWMsRUFBRSw0Q0FBNEM7R0FDNUQsa0JBQWtCLEVBQUUseUNBQXlDO0NBQy9EOztDQUVBO0dBQ0UsZUFBZSxFQUFFLCtDQUErQztHQUNoRSxZQUFZO0dBQ1osYUFBYTtDQUNmOztDQUVBO0dBQ0UsT0FBTyxFQUFFLGlFQUFpRTtDQUM1RSIsImZpbGUiOiJpdGVtLXBhZ2UuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5pdGVtLWRldGFpbCB7XHJcbiAgIGRpc3BsYXk6IGZsZXg7IC8qIFVzZSBmbGV4Ym94IHRvIGNyZWF0ZSBhIHR3by1jb2x1bW4gbGF5b3V0ICovXHJcbiAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7IC8qIEFsaWduIGl0ZW1zIHZlcnRpY2FsbHkgaW4gdGhlIGNlbnRlciAqL1xyXG4gICBwYWRkaW5nOiAyMHB4OyAvKiBBZGQgcGFkZGluZyBmb3Igc3BhY2luZyAqL1xyXG4gXHJcbiAgIC8qIE9wdGlvbmFsOiBBZGp1c3Qgd2lkdGggYW5kIG1hcmdpbiBhcyBuZWVkZWQgKi9cclxuICAgd2lkdGg6IDEwMCU7XHJcbiAgIG1heC13aWR0aDogODAwcHg7XHJcbiAgIG1hcmdpbjogMCBhdXRvO1xyXG4gfVxyXG4gXHJcbiAuaW1hZ2UtY29udGFpbmVyIHtcclxuICAgZmxleDogMCAwIGF1dG87IC8qIExldCB0aGUgY29udGFpbmVyIHNocmluayB0byBmaXQgY29udGVudCAqL1xyXG4gICBtYXJnaW4tcmlnaHQ6IDIwcHg7IC8qIEFkZCBtYXJnaW4gYmV0d2VlbiBpbWFnZSBhbmQgZGV0YWlscyAqL1xyXG4gfVxyXG4gXHJcbiBpbWcge1xyXG4gICBtYXgtd2lkdGg6IDEwMCU7IC8qIEVuc3VyZSB0aGUgaW1hZ2UgZml0cyB3aXRoaW4gaXRzIGNvbnRhaW5lciAqL1xyXG4gICB3aWR0aDogMzAwcHg7XHJcbiAgIGhlaWdodDogMzgwcHg7XHJcbiB9XHJcbiBcclxuIC5kZXRhaWxzLWNvbnRhaW5lciB7XHJcbiAgIGZsZXg6IDE7IC8qIEFsbG93IHRoZSBkZXRhaWxzIGNvbnRhaW5lciB0byBncm93IGFuZCBmaWxsIGF2YWlsYWJsZSBzcGFjZSAqL1xyXG4gfVxyXG4gIl19 */\"]\n});","map":{"version":3,"mappings":";;;;;;;;;IAQIA;IAAwCA;MAAAA;MAAA;MAAA,OAASA,2CAAT;IAAsB,CAAtB;IAAwBA;IAAQA;;;;ACO5E,OAAM,MAAOC,iBAAP,CAAwB;EAK5BC,YACUC,KADV,EAEUC,gBAFV,EAGE;EACQC,MAJV,EAKUC,gBALV,EAK4C;IAJlC;IACA;IAEA;IACA;EAAuC,CAVrB,CAY5B;EAEA;EACA;EACA;EAEA;;;EAEAC,OAAO,CAACC,IAAD,EAAU;IACf,IAAI,KAAKC,eAAT,EAA0B;MACxBC,OAAO,CAACC,GAAR,CAAY,QAAZ;MACAD,OAAO,CAACC,GAAR,CAAY,KAAKC,WAAjB;IACD,CAHD,MAGO;MACLF,OAAO,CAACC,GAAR,CAAY,YAAZ;MACA,KAAKN,MAAL,CAAYQ,QAAZ,CAAqB,CAAC,wBAAD,CAArB,EAAiD;QAAEC,WAAW,EAAE;UAAEC,OAAO,EAAE;QAAX;MAAf,CAAjD;IACD;EACF;;EAEDC,QAAQ;IACN,MAAMC,QAAQ,GAAG,KAAKd,KAAL,CAAWe,QAAX,CAAoBC,MAApB,CAA2B,MAA3B,CAAjB;IAEA,MAAMC,QAAQ,GAAkB;MAC9BC,IAAI,EAAGC,IAAD,IAAS;QACb,KAAKd,IAAL,GAAYc,IAAZ;MACD,CAH6B;MAI9BC,KAAK,EAAGA,KAAD,IAAU;QACfb,OAAO,CAACa,KAAR,CAAcA,KAAd;MACD,CAN6B;MAO9BC,QAAQ,EAAE,MAAK;QACbd,OAAO,CAACC,GAAR,CAAY,KAAKC,WAAjB;QAEAF,OAAO,CAACC,GAAR,CAAY,yBAAZ;MACD;IAX6B,CAAhC;IAcA,KAAKF,eAAL,GAAuB,KAAKH,gBAAL,CAAsBG,eAAtB,EAAvB;IACA,KAAKG,WAAL,GAAmB,KAAKN,gBAAL,CAAsBmB,cAAtB,EAAnB;IACA,KAAKjB,IAAL,GAAY,KAAKJ,gBAAL,CAAsBsB,aAAtB,CAAoCT,QAApC,EAA8CU,SAA9C,CAAwDP,QAAxD,CAAZ;IAA8E;EAC/E;;AAlD2B;;;mBAAjBnB,mBAAiBD;AAAA;;;QAAjBC;EAAiB2B;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MDf9BhC,+BAAyB,CAAzB,EAAyB,KAAzB,EAAyB,CAAzB;MAEIA;MACFA;MACAA,+BAA+B,CAA/B,EAA+B,IAA/B;MACMA;MAAeA;MACnBA;MAAGA;MAAsBA;MAEzBA;;MACFA;;;;MAP8BA;MAAAA;MAAvBA;MAGDA;MAAAA;MACDA;MAAAA;MAEMA;MAAAA","names":["i0","ItemPageComponent","constructor","route","inventoryService","router","authorizeService","buyItem","item","isAuthenticated","console","log","accessToken","navigate","queryParams","message","ngOnInit","itemName","snapshot","params","observer","next","data","error","complete","getAccessToken","getItemByName","subscribe","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["D:\\Code\\Sunburst\\ClientApp\\src\\app\\items\\item-page\\item-page.component.html","D:\\Code\\Sunburst\\ClientApp\\src\\app\\items\\item-page\\item-page.component.ts"],"sourcesContent":["<div class=\"item-detail\">\n  <div class=\"image-container\">\n    <img [src]=\"item.imagePath\" alt=\"{{item.name}} image\">\n  </div>\n  <div class=\"details-container\">\n    <h2>{{ item.name }}</h2>\n    <p>{{ item.description }}</p>\n    <!-- Add other details here -->\n    <button *ngIf=\"isAuthenticated | async\" (click)=\"buyItem(item)\">Buy Item</button>\n  </div>\n  \n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { InventoryService } from 'src/app/services/inventory.service';\nimport { Observable, Observer } from 'rxjs';\nimport { AuthService } from 'src/app/services/auth/auth.service';\nimport { CommonModule } from '@angular/common';\nimport { AuthorizeService } from '../../../api-authorization/authorize.service';\nimport { HttpEvent } from '@angular/common/http';\n\n@Component({\n  selector: 'app-item-page',\n  templateUrl: './item-page.component.html',\n  styleUrls: ['./item-page.component.css']\n})\n\nexport class ItemPageComponent implements OnInit {\n  item: any;\n  public isAuthenticated?: Observable<boolean>;\n  private accessToken?: Observable<string | null>;\n\n  constructor(\n    private route: ActivatedRoute,\n    private inventoryService: InventoryService,\n    // private authService: AuthService, \n    private router: Router,\n    private authorizeService: AuthorizeService) { }\n\n  // isUserLoggedIn(): boolean {\n\n  //   const user = this.authService.isAuthenticated();\n  //   // console.log('User: ', user);\n  //   return user !== null;\n\n  // }\n\n  buyItem(item: any): void {\n    if (this.isAuthenticated) {\n      console.log('logged');\n      console.log(this.accessToken);\n    } else {\n      console.log('not logged');\n      this.router.navigate(['Identity/Account/Login'], { queryParams: { message: 'Please log in to buy items.' } });\n    }\n  }\n\n  ngOnInit(): void {\n    const itemName = this.route.snapshot.params['name'];\n\n    const observer: Observer<any> = {\n      next: (data) => {\n        this.item = data;\n      },\n      error: (error) => {\n        console.error(error);\n      },\n      complete: () => {\n        console.log(this.accessToken);\n\n        console.log('Item Observer completed');\n      }\n    };\n\n    this.isAuthenticated = this.authorizeService.isAuthenticated();\n    this.accessToken = this.authorizeService.getAccessToken();\n    this.item = this.inventoryService.getItemByName(itemName).subscribe(observer);;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}